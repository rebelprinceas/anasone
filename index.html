<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Trends Teller Ultimate</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Syncopate:wght@700&family=Inter:wght@400;900&family=JetBrains+Mono&display=swap');

        :root {
            --winner-color: #00ff41; 
            --gold: #FFD700;
            --silver: #C0C0C0;
            --dark-grey: #222222;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: #000; color: white; font-family: 'Inter', sans-serif;
            overflow: hidden;
        }

        /* üõ† SETUP SCREEN */
        #setup { padding: 25px; overflow-y: auto; height: 100vh; background: #0a0a0a; display: block; position: relative; z-index: 100; }
        .input-group { background: #151515; padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #222; }
        input[type="text"], input[type="number"], input[type="file"] { 
            width: 100%; padding: 12px; margin: 5px 0; border-radius: 8px; 
            border: 1px solid #333; background: #000; color: white;
        }
        .color-picker-row { display: flex; gap: 10px; align-items: center; margin-top: 10px; }
        input[type="color"] { width: 50px; height: 50px; border: none; background: none; cursor: pointer; }
        .start-btn { 
            background: var(--gold); color: black; width: 100%; padding: 18px; 
            font-size: 18px; font-weight: 900; border-radius: 10px; border: none; margin-top: 10px; cursor: pointer;
        }

        /* üé• RENDER SCREEN & BACKGROUND MESH */
        #render-screen { display: none; width: 100vw; height: 100vh; position: relative; }
        #frame { 
            height: 100%; display: flex; flex-direction: column; background: #000; position: relative;
        }
        /* The Tech Mesh Overlay */
        #frame::before {
            content: ''; position: absolute; inset: 0;
            background-image: radial-gradient(rgba(255, 255, 255, 0.15) 1px, transparent 1px);
            background-size: 30px 30px; /* ‡§Æ‡•á‡§∂ ‡§ï‡§æ ‡§ò‡§®‡§§‡•ç‡§µ */
            pointer-events: none; z-index: 0;
        }

        .player-card {
            flex: 1; display: flex; flex-direction: column;
            justify-content: center; align-items: center; 
            position: relative; padding: 10px; z-index: 2; /* ‡§Æ‡•á‡§∂ ‡§ï‡•á ‡§ä‡§™‡§∞ */
        }

        /* ‚ú® LIGHT SWEEP ANIMATION KEYFRAMES */
        @keyframes borderSweep {
            0% { background-position: 0% center; }
            100% { background-position: 200% center; }
        }

        /* üíä STYLISH NAME PILL WITH SWEEP */
        .name-pill {
            /* border-color ‡§ï‡•ã transparent ‡§ï‡§∞‡•á‡§Ç ‡§§‡§æ‡§ï‡§ø ‡§ó‡•ç‡§∞‡•á‡§°‡§ø‡§è‡§Ç‡§ü ‡§¶‡§ø‡§ñ‡•á */
            border: 3px solid transparent; 
            border-radius: 50px;
            /* ‡§°‡§¨‡§≤ ‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§°: ‡§™‡§π‡§≤‡§æ ‡§Ö‡§Ç‡§¶‡§∞ ‡§ï‡§æ ‡§∞‡§Ç‡§ó, ‡§¶‡•Ç‡§∏‡§∞‡§æ ‡§¨‡•â‡§∞‡•ç‡§°‡§∞ ‡§ï‡§æ ‡§ó‡•ç‡§∞‡•á‡§°‡§ø‡§è‡§Ç‡§ü */
            background: 
                linear-gradient(var(--dark-grey), var(--dark-grey)) padding-box, /* Inner BG */
                linear-gradient(90deg, var(--silver) 20%, var(--gold) 50%, var(--silver) 80%) border-box; /* Sweep Gradient */
            background-size: 200% auto;
            animation: borderSweep 3s linear infinite;

            color: var(--gold); padding: 8px 30px;
            font-family: 'Syncopate', sans-serif; font-size: 14px; letter-spacing: 2px; text-transform: uppercase;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5); z-index: 15;
        }

        /* üñº PHOTO BOX WITH SWEEP */
        .photo-box {
            width: 280px; height: 280px; border-radius: 50%;
            border: 5px solid transparent; /* Transparent for gradient */
            background: 
                linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)) padding-box,
                linear-gradient(90deg, var(--silver) 20%, var(--gold) 50%, var(--silver) 80%) border-box;
            background-size: 200% auto;
            animation: borderSweep 4s linear infinite reverse; /* ‡§â‡§≤‡•ç‡§ü‡•Ä ‡§¶‡§ø‡§∂‡§æ ‡§Æ‡•á‡§Ç ‡§ò‡•Å‡§Æ‡§æ‡§µ */

            padding: 5px; position: relative; transition: all 0.4s ease; margin: 15px 0;
        }
        .photo-box img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }

        .value-pill {
            position: absolute; bottom: -25px; left: 50%; transform: translateX(-50%);
            background: #fff; color: #000; padding: 8px 40px;
            border-radius: 6px; font-size: 60px; font-weight: 900;
            box-shadow: 0 10px 40px rgba(0,0,0,0.9); min-width: 200px; text-align: center;
        }

        /* üìä MIDDLE HUB & TYPEWRITER FONT */
        #middle-hub {
            height: 180px; background: rgba(0,0,0,0.6);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255,255,255,0.1); border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 10;
        }

        /* ‡§ü‡§æ‡§á‡§™‡§∞‡§æ‡§á‡§ü‡§∞ ‡§á‡§´‡•á‡§ï‡•ç‡§ü ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡•ã‡§®‡•ã‡§∏‡•ç‡§™‡•á‡§∏ ‡§´‡•â‡§®‡•ç‡§ü ‡§Ö‡§ö‡•ç‡§õ‡§æ ‡§≤‡§ó‡§§‡§æ ‡§π‡•à */
        .typewriter-text { font-family: 'JetBrains Mono', monospace; white-space: nowrap; overflow: hidden; border-right: 2px solid transparent; }
        /* ‡§ü‡§æ‡§á‡§™‡§ø‡§Ç‡§ó ‡§ï‡•á ‡§¶‡•å‡§∞‡§æ‡§® ‡§ï‡§∞‡•ç‡§∏‡§∞ ‡§¨‡•ç‡§≤‡§ø‡§Ç‡§ï ‡§ï‡§∞‡•á */
        .typing-active { border-right-color: var(--gold); animation: blinkCursor 0.5s step-end infinite alternate; }
        @keyframes blinkCursor { 50% { border-color: transparent; } }

        #ui-format { font-size: 14px; color: #aaa; letter-spacing: 3px; margin-bottom: 8px; text-transform: uppercase; min-height: 20px; }
        #ui-stat { font-size: 38px; color: var(--gold); font-weight: 900; margin-bottom: 10px; text-transform: uppercase; min-height: 50px; }

        .score-row { display: flex; align-items: center; gap: 20px; }
        .score-num { font-size: 45px; font-weight: 900; color: #fff; }
        .vs-circle { width: 35px; height: 35px; border-radius: 50%; border: 1px solid #444; display: flex; align-items: center; justify-content: center; font-size: 10px; color: #777; font-weight: bold; }

        /* Winner Effects */
        @keyframes intensePulse {
            0% { box-shadow: 0 0 20px var(--winner-color); }
            50% { box-shadow: 0 0 100px var(--winner-color); }
            100% { box-shadow: 0 0 20px var(--winner-color); }
        }
        /* ‡§ú‡§¨ ‡§ú‡•Ä‡§§‡•á‡§Ç, ‡§§‡•ã ‡§∏‡•ç‡§µ‡•Ä‡§™ ‡§è‡§®‡•Ä‡§Æ‡•á‡§∂‡§® ‡§∞‡•ã‡§ï ‡§ï‡§∞ ‡§π‡§∞‡§æ ‡§ó‡•ç‡§≤‡•ã ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç */
        .winner-active { 
            animation: intensePulse 1.5s infinite ease-in-out !important; 
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)) padding-box, linear-gradient(var(--winner-color), var(--winner-color)) border-box !important;
            border-color: transparent !important;
        }
        .winner-static-text { color: var(--winner-color) !important; }
        
        #timer-overlay { position: fixed; inset: 0; background: #000; z-index: 200; display: none; align-items: center; justify-content: center; font-size: 150px; font-weight: 900; color: var(--gold); }
    </style>
</head>
<body>

    <div id="setup">
        <h2 style="text-align:center; color:var(--gold); font-family:'Syncopate'">TRENDS TELLER ULTIMATE</h2>
        <div class="input-group">
            <label style="font-size:12px; color:var(--gold)">CUSTOM BACKGROUND GRADIENT</label>
            <div class="color-picker-row">
                <input type="color" id="bgColor1" value="#0f0f20">
                <input type="color" id="bgColor2" value="#000000">
            </div>
        </div>
        <div class="input-group">
            <label>TOP PLAYER (P1)</label>
            <input type="text" id="p1Name" placeholder="Name">
            <input type="file" id="p1Img">
        </div>
        <div class="input-group">
            <label>BOTTOM PLAYER (P2)</label>
            <input type="text" id="p2Name" placeholder="Name">
            <input type="file" id="p2Img">
        </div>
        <div class="input-group">
            <label>STATS DATA</label>
            <div id="stats-list">
                <div class="row" style="display:flex; gap:5px; margin-bottom:5px">
                    <input type="text" placeholder="Format" style="width:25%"><input type="text" placeholder="Stat" style="width:35%"><input type="number" placeholder="P1" style="width:20%"><input type="number" placeholder="P2" style="width:20%">
                </div>
            </div>
            <button onclick="addRow()" style="width:100%; padding:10px; background:#222; color:#888; border:none; border-radius:5px">+ ADD ROW</button>
        </div>
        <button class="start-btn" onclick="startEliteRender()">üé¨ START RECORDING</button>
    </div>

    <div id="timer-overlay">5</div>

    <div id="render-screen">
        <div id="frame">
            <div class="player-card">
                <div id="box1" class="photo-box"><img id="vImg1"><div id="val1" class="value-pill">0</div></div>
                <div class="name-pill" id="n1">P1</div>
            </div>

            <div id="middle-hub">
                <div id="ui-format" class="typewriter-text">FORMAT</div>
                <div id="ui-stat" class="typewriter-text">READY</div>
                <div class="score-row">
                    <div id="s1" class="score-num">0</div>
                    <div class="vs-circle">VS</div>
                    <div id="s2" class="score-num">0</div>
                </div>
            </div>

            <div class="player-card">
                <div class="name-pill" id="n2">P2</div>
                <div id="box2" class="photo-box"><img id="vImg2"><div id="val2" class="value-pill">0</div></div>
            </div>
        </div>
    </div>

    <script>
        function addRow() {
            const div = document.createElement('div');
            div.className = 'row'; div.style = "display:flex; gap:5px; margin-bottom:5px";
            div.innerHTML = `<input type="text" placeholder="Format" style="width:25%"><input type="text" placeholder="Stat" style="width:35%"><input type="number" placeholder="P1" style="width:20%"><input type="number" placeholder="P2" style="width:20%">`;
            document.getElementById('stats-list').appendChild(div);
        }

        // ‚ú® Typewriter Effect Function
        function typeWriter(elementId, text, speed = 50) {
            const element = document.getElementById(elementId);
            element.innerHTML = ""; // ‡§™‡•Å‡§∞‡§æ‡§®‡§æ ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§∏‡§æ‡§´‡§º ‡§ï‡§∞‡•á‡§Ç
            element.classList.add('typing-active'); // ‡§ï‡§∞‡•ç‡§∏‡§∞ ‡§ö‡§æ‡§≤‡•Ç ‡§ï‡§∞‡•á‡§Ç
            let i = 0;
            function typing() {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(typing, speed);
                } else {
                    element.classList.remove('typing-active'); // ‡§ï‡§∞‡•ç‡§∏‡§∞ ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç
                }
            }
            typing();
        }

        async function startEliteRender() {
            if (document.documentElement.requestFullscreen) await document.documentElement.requestFullscreen();
            const c1 = document.getElementById('bgColor1').value, c2 = document.getElementById('bgColor2').value;
            document.getElementById('frame').style.background = `linear-gradient(180deg, ${c1} 0%, ${c2} 100%)`;
            document.getElementById('n1').innerText = document.getElementById('p1Name').value;
            document.getElementById('n2').innerText = document.getElementById('p2Name').value;
            const f1 = document.getElementById('p1Img').files[0], f2 = document.getElementById('p2Img').files[0];
            if(f1) document.getElementById('vImg1').src = URL.createObjectURL(f1);
            if(f2) document.getElementById('vImg2').src = URL.createObjectURL(f2);
            const stats = [];
            document.querySelectorAll('.row').forEach(r => { const ins = r.querySelectorAll('input'); if(ins[1].value) stats.push({ f: ins[0].value, l: ins[1].value, v1: +ins[2].value, v2: +ins[3].value }); });
            document.getElementById('setup').style.display = 'none';
            document.getElementById('render-screen').style.display = 'block';
            const timer = document.getElementById('timer-overlay'); timer.style.display = 'flex';
            for(let i=5; i>0; i--) { timer.innerText = i; await new Promise(r => setTimeout(r, 1000)); }
            timer.style.display = 'none';
            animate(stats);
        }

        async function animate(stats) {
            let sc1 = 0, sc2 = 0;
            for (let item of stats) {
                // ‚ú® ‡§ü‡§æ‡§á‡§™‡§∞‡§æ‡§á‡§ü‡§∞ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§® ‡§ï‡•ã ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç
                typeWriter('ui-format', item.f.toUpperCase(), 40);
                typeWriter('ui-stat', item.l.toUpperCase(), 40);
                
                reset();
                await Promise.all([count('val1', item.v1), count('val2', item.v2)]);
                await new Promise(r => setTimeout(r, 800));
                if(item.v1 > item.v2) { sc1++; win(1); }
                else if(item.v2 > item.v1) { sc2++; win(2); }
                document.getElementById('s1').innerText = sc1; document.getElementById('s2').innerText = sc2;
                await new Promise(r => setTimeout(r, 2200));
            }
            alert("Done!");
        }

        function count(id, end) {
            return new Promise(res => {
                let obj = document.getElementById(id), dur = 1200, start = null;
                function step(ts) { if(!start) start = ts; let prog = Math.min((ts - start) / dur, 1); obj.innerText = Math.floor(prog * end); if(prog < 1) requestAnimationFrame(step); else res(); }
                requestAnimationFrame(step);
            });
        }

        function win(n) {
            document.getElementById('box'+n).classList.add('winner-active');
            document.getElementById('val'+n).classList.add('winner-static-text');
        }

        function reset() {
            document.querySelectorAll('.photo-box').forEach(e => e.classList.remove('winner-active'));
            document.querySelectorAll('.value-pill').forEach(e => e.classList.remove('winner-static-text'));
        }
    </script>
</body>
</html>
